[gd_scene load_steps=20 format=3 uid="uid://xu3puiwkcc2e"]

[ext_resource type="Script" uid="uid://dvvqn4yebxdbb" path="res://_debug/test_lvl_3d/test_lvl_3d.gd" id="1_biwvi"]
[ext_resource type="Texture2D" uid="uid://ma71uhkqcsq5" path="res://_debug/test_lvl_3d/track_tex.png" id="3_71i62"]
[ext_resource type="Script" uid="uid://tde7i7v0b2lx" path="res://_debug/test_lvl_3d/cam_rig.gd" id="3_c8rof"]
[ext_resource type="Script" uid="uid://bbnmptm6xl3py" path="res://_debug/test_lvl_3d/ball.gd" id="3_v6fep"]
[ext_resource type="PackedScene" uid="uid://big86m0q0fhvh" path="res://assets/models/car_scuffed.glb" id="5_ixj8b"]
[ext_resource type="PackedScene" uid="uid://dag8rxu5kmtaq" path="res://scenes/art_scenes/racer_ben[art].tscn" id="5_yfyfv"]
[ext_resource type="PackedScene" uid="uid://cb5lxd7ivfj8c" path="res://scenes/game_scenes/ui/keygen.tscn" id="7_goep6"]
[ext_resource type="PackedScene" uid="uid://crxtpaqmc6fnt" path="res://scenes/art_scenes/rail.tscn" id="8_ixj8b"]
[ext_resource type="PackedScene" uid="uid://d2chxchtnk1h0" path="res://scenes/art_scenes/road.tscn" id="8_jikjp"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_yfyfv"]
sky_top_color = Color(0.0637553, 0.618238, 0.883874, 1)
sky_horizon_color = Color(0.570372, 0.896429, 0.952946, 1)
ground_bottom_color = Color(0.598402, 0.779306, 0.31347, 1)
ground_horizon_color = Color(0.710443, 0.877264, 0.834224, 1)

[sub_resource type="Sky" id="Sky_v6fep"]
sky_material = SubResource("ProceduralSkyMaterial_yfyfv")

[sub_resource type="Environment" id="Environment_goep6"]
background_mode = 2
sky = SubResource("Sky_v6fep")

[sub_resource type="SphereShape3D" id="SphereShape3D_s8dc5"]

[sub_resource type="BoxShape3D" id="BoxShape3D_c8rof"]
size = Vector3(10, 1, 10)

[sub_resource type="BoxMesh" id="BoxMesh_yfyfv"]
resource_local_to_scene = true
size = Vector3(10, 1, 10)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_v6fep"]
albedo_texture = ExtResource("3_71i62")
uv1_scale = Vector3(15, 10, 1)
texture_filter = 0

[sub_resource type="Curve3D" id="Curve3D_hc0pj"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 3.62379, 0.686345, -4.28609, 0, 0, 0, 0, 0, 0, 4.73192, -35.3029, -41.9252),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="Curve3D" id="Curve3D_ixj8b"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -4.25427, 0.84191, -11.3792, 0, 0, 0, 0, 0, 0, -18.9466, 0.777546, -4.40619, 6.74381, -0.330345, -7.82744, -6.74381, 0.330345, 7.82744, -45.2744, -0.333264, 5.82305, -5.45587, -0.0230211, 0.463753, 5.45587, 0.0230211, -0.463753, -13.8561, 0.785843, 27.005, -1.59337, -0.00857121, 4.59956, 1.59337, 0.00857121, -4.59956, 10.0772, -6.01107, 19.8222, 0.468904, 0.000255406, 4.12269, -0.468904, -0.000255406, -4.12269, 17.6047, -12.0223, -8.39155, 6.29538, 0.0255792, 1.84234, -6.29538, -0.0255792, -1.84234, 1.84565, -19.3046, -31.2416, 0, 0, 0, 0, 0, 0, -26.4319, -27.9052, -12.3256, 8.36029, 0.0338723, 2.681, -8.36029, -0.0338723, -2.681, -38.3246, -45.7547, 40.2407, 0, 0, 0, 0, 0, 0, -44.0367, -45.7681, 14.8695, -0.105804, 2.14701, 1.06536, 0.105804, -2.14701, -1.06536, -47.84, -52.9748, 7.89678, 0, 0, 0, 0, 0, 0, -41.5529, -57.0075, 1.76398, 0, 0, 0, 0, 0, 0, -15.7238, -59.9171, 24.2153, 0, 0, 0, 0, 0, 0, -10.5874, -69.6306, 22.1251, 0, 0, 0, 0, 0, 0, -5.04048, -70.7673, 2.64212),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 15
up_vector_enabled = false

[sub_resource type="CapsuleMesh" id="CapsuleMesh_goep6"]
radius = 3.761
height = 26.544

[node name="TestLvl3d" type="Node3D"]
script = ExtResource("1_biwvi")
tilt_limit_x = 0.349066
tilt_limit_z = 0.349066

[node name="OmniLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
layers = 3
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_goep6")

[node name="Keygen" parent="." instance=ExtResource("7_goep6")]
visible = false

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
z_index = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -244.0
offset_right = 381.0
grow_vertical = 0
color = Color(0, 0, 0, 0.243137)

[node name="GravityLabel" type="RichTextLabel" parent="CanvasLayer/ColorRect"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -181.0
offset_right = 408.0
grow_vertical = 0
theme_override_font_sizes/normal_font_size = 32
bbcode_enabled = true
text = "Gravity:
[color=red]X: 0
[color=green]Y: 0[/color]
[color=blue]Z: 0[/color]"

[node name="SpeedLabel" type="RichTextLabel" parent="CanvasLayer/ColorRect"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 3.0
offset_top = -236.0
offset_right = 411.0
offset_bottom = -143.0
grow_vertical = 0
theme_override_font_sizes/normal_font_size = 32
bbcode_enabled = true
text = "Speed:"

[node name="SubViewportContainer" type="SubViewportContainer" parent="CanvasLayer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="CanvasLayer/SubViewportContainer"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(1152, 648)
render_target_update_mode = 4

[node name="CamRig" type="Marker3D" parent="CanvasLayer/SubViewportContainer/SubViewport" node_paths=PackedStringArray("bg_cam")]
transform = Transform3D(1, 0, 0, 0, 0.689038, 0.724725, 0, -0.724725, 0.689038, 0, 2.29103, 0.0180929)
script = ExtResource("3_c8rof")
bg_cam = NodePath("../../../../BGCam")
sensitivity = 0.2

[node name="PlayerCam" type="Camera3D" parent="CanvasLayer/SubViewportContainer/SubViewport/CamRig"]
transform = Transform3D(1, 0, 0, 0, 0.977427, -0.211273, 0, 0.211273, 0.977427, 0, -0.291565, 3.16561)
cull_mask = 1048573

[node name="BGCam" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.952836, 0.303484, 0, -0.303484, 0.952836, 0, 3.68146, 2.41063)
cull_mask = 1048574

[node name="Player" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.29103, 0.0180929)
collision_layer = 2
collision_mask = 3
mass = 10.0
gravity_scale = 10.0
can_sleep = false
contact_monitor = true
max_contacts_reported = 1
linear_damp = 0.07
script = ExtResource("3_v6fep")

[node name="car_scuffed" parent="Player" instance=ExtResource("5_ixj8b")]
transform = Transform3D(-1.07093e-08, 0, -0.245, 0, 0.245, 0, 0.245, 0, -1.07093e-08, -0.0193034, -0.106383, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
shape = SubResource("SphereShape3D_s8dc5")
debug_color = Color(0.852898, 0.239525, 0.705028, 0.42)
debug_fill = false

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="Player"]
remote_path = NodePath("../../CanvasLayer/SubViewportContainer/SubViewport/CamRig")
update_rotation = false
update_scale = false

[node name="RacerBen" parent="Player" node_paths=PackedStringArray("target") instance=ExtResource("5_yfyfv")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 1.25346, -1.6704, -0.0180929)
target = NodePath("..")
target_radius = 0.5
idle_thresh = 0.5
eject = true
override_velocity_length = 10.495

[node name="Track" type="Node3D" parent="."]

[node name="TrackPart" type="StaticBody3D" parent="Track" groups=["track"]]
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Track/TrackPart"]
visible = false
shape = SubResource("BoxShape3D_c8rof")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Track/TrackPart"]
mesh = SubResource("BoxMesh_yfyfv")
surface_material_override/0 = SubResource("StandardMaterial3D_v6fep")

[node name="Road" parent="Track" instance=ExtResource("8_jikjp")]

[node name="Path3D" parent="Track/Road" index="0"]
curve = SubResource("Curve3D_hc0pj")

[node name="Rail2" parent="Track" instance=ExtResource("8_ixj8b")]
transform = Transform3D(0.00385815, 0.000430084, -0.999992, -0.00418428, 0.999991, 0.000413954, 0.999984, 0.00418265, 0.00385991, -9.59216, -0.854993, -0.639967)

[node name="Path3D" parent="Track/Rail2" index="0"]
curve = SubResource("Curve3D_ixj8b")

[node name="BG" type="Node3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="BG"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.8655, -8.20295, -0.807329)
layers = 2
mesh = SubResource("CapsuleMesh_goep6")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="BG"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -19.6062, -8.20295, -11.5609)
layers = 2
mesh = SubResource("CapsuleMesh_goep6")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="BG"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.800355, -8.20295, -32.665)
layers = 2
mesh = SubResource("CapsuleMesh_goep6")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="BG"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16.3233, -8.20295, -96.2914)
layers = 2
mesh = SubResource("CapsuleMesh_goep6")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="BG"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 51.4306, -8.20295, -43.2505)
layers = 2
mesh = SubResource("CapsuleMesh_goep6")

[editable path="Track/Road"]
[editable path="Track/Rail2"]
